# Rails Rspec

[rspec-rails](https://github.com/rspec/rspec-rails) seems complicated since it
includes a lot of different gems, but on other hand, there are many usefull
plugins like
[rspec_api_documentation](https://github.com/zipmark/rspec_api_documentation)
(automatically generate API docs from your tests)

## Install

Since <https://relishapp.com/> is currently down, you can find info on gems
source itself or autogenerated on rspec.info, for just replace
`https://relishapp.com/rspec/` with `https://rspec.info/features/6-0/` and
remove `docs`

so instead of

https://relishapp.com/rspec/rspec-rails/docs/matchers/have-enqueued-job-matcher

use

https://rspec.info/features/6-0/rspec-rails/matchers/have-enqueued-job-matcher

```
# Gemfile
group :development, :test do
  gem "rspec-rails", "~> 6.0.0"
end

bundle install
rails generate rspec:install

git rm test
git add .
git commit -am"rails generate rspec:install"
```

## Config

```
# spec/rails_helper.md

# Use prefix a_ so when we search for helper usage, the first result is
# definition from spec/a_support
Dir[Rails.root.join("spec", "a_support", "**", "*.rb")].sort.each { |f| require f }

RSpec.configure do |config|
  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"
  # Instead of adding `fixtures :all` to eash spec, we can enable it here
  config.global_fixtures = :all
```

## Usage

<https://github.com/rspec/rspec-rails#what-tests-should-i-write>
We use model, request and system tests.

* Basic matches [rspec-expectations](https://rspec.info/features/3-12/rspec-expectations/built-in-matchers/). Do not use *should* matchers.

## Model spec

## Request spec

<https://rspec.info/features/6-0/rspec-rails/request-specs/request-spec/>

## System spec

<https://rspec.info/features/6-0/rspec-rails/system-specs/system-specs/
